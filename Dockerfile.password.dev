FROM node:22-bookworm

RUN apt-get update \
 && apt-get install -y --no-install-recommends python3 python-is-python3 tzdata git curl ca-certificates \
 && rm -rf /var/lib/apt/lists/*

ENV TZ=America/Costa_Rica \
    WATCHPACK_POLLING=true \
    CHOKIDAR_USEPOLLING=true

WORKDIR /code/password

COPY password/package.json password/package-lock.json ./

RUN npm install

COPY password/. .
COPY password_generator.py /code/password_generator.py
COPY eff_short_wordlist_1.txt /code/eff_short_wordlist_1.txt

EXPOSE 3000 9229

CMD ["npm", "run", "dev"]
